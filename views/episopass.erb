<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <link rel="stylesheet" href="/stylesheets/episopass.css" type="text/css">
    <script language="JavaScript" src='/javascripts/jquery.js'></script>
<style type="text/css">
<!--
div.question {
  background-color:white;
  font-size:10pt;
  font-family:sans-serif;
  border:solid;
  border-width:1px;
  padding:2;
  margin: 0 0 2 2;
  vertical-aign:middle;
}

div.entry {
  background-color:#cee;
}

div.answer {
  font-size:9pt;
  font-family:sans-serif;
  width:400;
  border:solid;
  border-width:1px;
  padding:1;
  margin:0 0 2 2;
  vertical-align:middle;
}
span.answerlist {
  padding:20;
}
-->
</style>
    <title><%= @name %></title>
  </head>
  <body>
  <h1>EpisoPass - <%= @name %></h1>

  <table>
    <tr><td>Seed: <input type="text" value="<%= @seed %>" width=100></td></tr>
    <tr><td>Pass: <input type="text" id="pass" width=100></td></tr>
  </table>
  <p>

  <div id="main">
<!--
    <div>
      <div class="query">What is my name?</div>
      <div>
         <img src="http://gyazo.com/91046da67ab2e43cc4e6456e93c09cd1.png" class="answerlist">
	 <div class="answerlist">
           <input type="text"><br>
           <span class="answerlist">bbbbbbbbbb</span><br>
           <span class="answerlist">cc cc</span><br>
           <span class="answerlist">ddddd</span><br>
 	 </div>
      </div>
    </div>
  <div>
-->

<script>
var data = JSON.parse('<%= @json %>');
var questions = data['questions'];
var seed = data['seed'];

var answer = [];

for(i=0;i<questions.length;i++){
  answer[i] = 0;
}

for(i=0;i<questions.length;i++){
  var div = $("<div>");
  div.addClass('entry');

  var qdiv = $("<div>");
  qdiv.attr('id','imageurl' + String(i));
  qdiv.text(questions[i][0]);
  qdiv.addClass('question');
  div.append(qdiv);

  var img = $("<img>");
  img.attr('id',"image" + String(i));
  img.css('float','left');
  img.css('height','100');
  img.css('padding','2');

  img.attr('src',"http://farm1.static.flickr.com/54/121077554_eb0138d019.jpg");
  //http://gyazo.com/91046da67ab2e43cc4e6456e93c09cd1.png
  div.append(img);

  var divans = $("<div>");
  divans.attr('id','ansdiv' + String(i));
  divans.css('float','left');
  divans.css('padding','0');
  var answers = questions[i][1];
  for(j=0;j<answers.length-1;j++){
/*
    var adiv = $("<div>");
    adiv.addClass('answer');
    adiv.attr('id','ans'+i+'_'+j);
    adiv.text(answers[j]);
    adiv.on('click',function(){
      var id = $(this).attr('id');
      var m = id.match(/ans(\d+)_(\d+)/);
      var q = Number(m[1]);
      var a = Number(m[2]);
      answer[q] = a;
      //seteditline(event);
      //display();
    });
*/
    var adiv = $('<div>');
    adiv.css('border','none');
    adiv.css('borderWidth','0');
    adiv.css('padding','0');
    adiv.css('margin',0);
    var input = $('<input>');
    input.attr('type','text');
    input.attr('autocomplete','off');
    input.attr('size','80');
    input.val(answers[j]);
    input.css('border','solid');
    input.css('borderWidth','1px');
    input.css('padding','1');
    input.css('margin','0 0 2 2');
    input.css('verticalAlign','middle');
    input.css('backgroundColor','#ffffff');
    input.css('fontSize','9pt');
    input.css('fontFamily','sans-serif');
    input.on('click',function(){
      $(this).css('background','yellow');
    });
    input.on('blur',function(){ // フォーカスがはずれたとき
      $(this).css('background','blue');
    });
    input.on('keyup',function(){
      $('#pass').val($(this).val());
    });

    adiv.append(input);

    divans.append(adiv);
  }
  div.append(divans);

  var br = $('<br>');
  br.attr('clear','all');
  div.append(br);

  $("#main").append(div);
}

//e.text('aaaaa');
//$("#main").append(e);
</script>

  </body>
</html>
